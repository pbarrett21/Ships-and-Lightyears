<!DOCTYPE html>
<!-- Paul Barrett -->

<!-- example/starter code -->
<!-- also look at:
https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_table_insertrow

Game piece images:
http://pluspng.com/png-game-piece-9524.html
-->


<html lang="en">
<head>
	<meta charset="utf-8"/>
	<style>
	table {
		font-family: arial, sans-serif;
		border: 1px solid black
		border-collapse: collapse;
		width:60%;
		table-layout: fixed;
	}

	td, th {
		border: 2px solid #dddddd;
		text-align: center;
		padding: 6px;
	}
</style>

</head>

<body>
	<h1> Shoots and Lightyears </h1>
	<h3> Paul Barrett </h3>

	<!-- remember: example code! -->
	<p>
		How to play:<br>
		The objective of this game is to race your opponent to the end. <br>
		There are 20 squares to reach the end <br>
		Move your ships to the finish line before Nonkio does!
	</p>
	<table id="control">
		<tr>
			<td id="reset"><button onclick="Reset()">Reset</td>
			<td id="insert"><button onclick="insertSpot()">Insert</td>
			<td id="start"><button onclick="makeTable()">Start</td>
			<td id="move"><button onclick="moveShip()">Move</td>
		</tr>
	</table>
		<br>

		<h4>Game Alerts: </h4>
		<p id=gamemsg>
			Press start
		</p>
		<p id=nonkiogamemsg></p>
		<p id=fingamemsg></p>
		<!-- Note this is one table, you'll want TWO, one for each path -->
		<table id="trouble">
			<!--
			<tr>
				<td>Row 0 Cell 0</td>
				<td>Row 0 Cell 1</td>
				<td>Row 0 Cell 2</td>
				<td>Row 0 Cell 3</td>
			</tr>
		-->
		</table>

		<script>
		var theBoard = document.getElementById("trouble");
		var positions = [1, 23, 45, 67];
		finished();

		function IclickedHere() {
			// "this" should be an object of what was clicked!
			this.innerHTML = "clicked!";
			if (this.style.color == "red") {
				this.style.color = "blue";
			} else {
				this.style.color = "red";
			}
		}

		//stop user from making a bunch of tables
		var startToggle = true;
		//make the board
		function makeTable(){
			if(startToggle == true){
				msg = document.getElementById("gamemsg");
				msg.innerHTML = "Press move button and select which friendly ship you would like to move"
				+ "<br />" + "Chose FS Ship or FP Ship";
				for(i = 0; i < 22; i++){
					insertSpot();
				}
			} else {
				msg.innerHTML = "You must finish the current game before restarting!";
			}
			startToggle = false;
		}

		function finished(){
			//finish spots are [21, 43, 65, 87]
			if(positions[0] == 21 && positions[1] == 43){
				window.alert("You won!\nKeep playing or press Start to restart.");
			} else if (positions[2] == 65 && positions[3] == 87) {
				window.alert("You lost!\nKeep playing or press Start to restart.");
			}
		}

		function rollDice(begin, end){
			return Math.floor(Math.random() * (end - begin + 1)) + begin;
		}

		function insertSpot() {
			var theBoard = document.getElementById("trouble");
			var newRow = theBoard.insertRow(-1);
			var numRows = theBoard.getElementsByTagName("tr").length-1; // rows start at 0

			cell10 = newRow.insertCell(-1);
			text = "||------------||";
			cell10.appendChild(document.createTextNode(text));
			cell10.id = numRows;

			//console.log("HereX :", cell10.id);

			cell11 = newRow.insertCell(-1);
			text = "||------------||";
			cell11.appendChild(document.createTextNode(text));
			cell11.id = numRows + 22;

			//console.log("HereY :", cell11.id);

			cell12 = newRow.insertCell(-1);
			text = "||------------||";
			cell12.appendChild(document.createTextNode(text));
			cell12.id = numRows + 44;

			//console.log("HereX :", cell10.id);

			cell13 = newRow.insertCell(-1);
			//text = "Row "+numRows+" Cell 3";
			text = "||------------||";
			cell13.appendChild(document.createTextNode(text));
			cell13.id = numRows + 66;

			w = document.getElementById("0");
			x = document.getElementById("22");
			y = document.getElementById("44");
			z = document.getElementById("66");
			w.innerHTML = "Friendly" + "<br />" + "Scout";
			x.innerHTML = "Friendly" + "<br />" + "Passenger";
			y.innerHTML = "Enemy" + "<br />" + "Scout";
			z.innerHTML = "Enemy" + "<br />" + "Passenger";
		}

		function moveShip(){
			scout = document.getElementById(positions[0]);
			pass = document.getElementById(positions[1]);
			y1 = document.getElementById(positions[2]);
			z1 = document.getElementById(positions[3]);
			scout.innerHTML = "|| FS Ship ||";
			pass.innerHTML = "|| FP Ship ||";
			y1.innerHTML = "|| ES Ship ||";
			z1.innerHTML = "|| EP Ship ||";

			scout.addEventListener("click", scoutmove, false);
			pass.addEventListener("click", passmove, false);
		}

		function scoutmove(){
			moveNum = rollDice(1,6);
			removeclickpass = document.getElementById(positions[1]);
			removeclickpass.removeEventListener("click", passmove, false);
			removeclickscout = document.getElementById(positions[0]);
			removeclickscout.removeEventListener("click", scoutmove, false);
			this.innerHTML = "||------------||";
			newid = parseInt(this.id) + moveNum;
			if(newid >= 21){
				newid = 21;
				msg = document.getElementById("fingamemsg");
				msg.innerHTML = "Friendly Scout has reached the finish line!";
			}
			newspot = document.getElementById(newid);
			newspot.innerHTML = "|| FS Ship ||";
			msg = document.getElementById("gamemsg");
			msg.innerHTML = "You rolled a " + moveNum + "!";
			positions[0] = newspot.id;
			//finished();
			nonkiomove();
		}

		function passmove(){
			moveNum = rollDice(1,6);
			removeclickscout = document.getElementById(positions[0]);
			removeclickscout.removeEventListener("click", scoutmove, false);
			removeclickpass = document.getElementById(positions[1]);
			removeclickpass.removeEventListener("click", passmove, false);
			this.innerHTML = "||------------||";
			newid = parseInt(this.id) + moveNum;
			if(newid >= 43){
				newid = 43;
				msg = document.getElementById("fingamemsg");
				msg.innerHTML = "Friendly Passenger has reached the finish line!";
			}
			newspot = document.getElementById(newid);
			newspot.innerHTML = "|| FP Ship ||";
			msg = document.getElementById("gamemsg");
			msg.innerHTML = "You rolled a " + moveNum + "!";
			positions[1] = newspot.id;
			nonkiomove();
		}

		var switcher = 1;
		var nonscoutfin = false;
		var nonpassfin = false;

		function nonkiomove(){
			msg = document.getElementById("nonkiogamemsg");
				moveNum = rollDice(1,6);
				kioscout = document.getElementById(positions[2]);
				kiopass = document.getElementById(positions[3]);
				if(switcher == 1){
					kioscout.innerHTML = "||------------||"
					newid = parseInt(kioscout.id) + moveNum;
					if(newid >= 65){
						newid = 65;
						msg = document.getElementById("nonkiogamemsg");
						msg.innerHTML = "Nonkio's Scout has reached the finish line!";
						nonscoutfin = true;
					}
					newspot = document.getElementById(newid);
					newspot.innerHTML = "|| ES Ship ||";
					if(nonpassfin == false){
						switcher = 0;
					} else {
						switcher = 1;
					}
					positions[2] = newspot.id;
					msg.innerHTML = "Nonkio rolled a " + moveNum + " and moved his scout";
				} else {
					kiopass.innerHTML = "||------------||"
					newid = parseInt(kiopass.id) + moveNum;
					if(newid >= 87){
						newid = 87;
						msg = document.getElementById("nonkiogamemsg");
						msg.innerHTML = "Nonkio's Passenger has reached the finish line!";
						nonpassfin = true;
					}
					newspot = document.getElementById(newid);
					newspot.innerHTML = "|| EP Ship ||";
					if(nonscoutfin == false){
						switcher = 1;
					} else {
						switcher = 0;
					}
					positions[3] = newspot.id;
					msg.innerHTML = "Nonkio rolled a " + moveNum + " and moved his passenger";
				}
		}

	</script>

	</body>
</html>
