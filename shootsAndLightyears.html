<!DOCTYPE html>
<!-- Paul Barrett -->

<!-- example/starter code -->
<!-- also look at:
https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_table_insertrow

Game piece images:
http://pluspng.com/png-game-piece-9524.html
-->


<html lang="en">
<head>
	<meta charset="utf-8"/>
	<style>
	table {
		font-family: arial, sans-serif;
		border: 1px solid black
		border-collapse: collapse;
		width:60%;
		table-layout: fixed;
	}

	td, th {
		border: 2px solid #dddddd;
		text-align: center;
		padding: 6px;
	}
</style>

</head>

<body>
	<h1> Shoots and Lightyears </h1>
	<h3> Paul Barrett </h3>

	<!-- remember: example code! -->
	<p>
		How to play:<br>
		The objective of this game is to race your opponent to the end. <br>
		There are 20 squares to reach the end <br>
		Move your ships to the finish line before Nonkio does!
	</p>
	<table id="control">
		<tr>
			<td id="reset"><button onclick="Reset()">Reset</td>
			<td id="insert"><button onclick="insertSpot()">Insert</td>
			<td id="start"><button onclick="makeTable()">Start</td>
			<td id="move"><button onclick="moveShip()">Move</td>
		</tr>
	</table>
		<br>

		<h4>Game Alerts: </h4>
		<p id=gamemsg>
			Press start
		</p>

		<!-- Note this is one table, you'll want TWO, one for each path -->
		<table id="trouble">
			<!--
			<tr>
				<td>Row 0 Cell 0</td>
				<td>Row 0 Cell 1</td>
				<td>Row 0 Cell 2</td>
				<td>Row 0 Cell 3</td>
			</tr>
		-->
		</table>

		<script>
		var theBoard = document.getElementById("trouble");

		/*
		var row1 = theBoard.insertRow(-1);

		cell10 = row1.insertCell(-1);
		text = "Row 1 Cell 0";
		cell10.appendChild(document.createTextNode(text));
		console.log("Here1");

		cell11 = row1.insertCell(-1);
		text = "Row 1 Cell 1";
		cell11.appendChild(document.createTextNode(text));
		console.log("Here2");

		cell12 = row1.insertCell(-1);
		text = "Row 1 Cell 2";
		cell12.appendChild(document.createTextNode(text));
		console.log("Here3");

		cell13 = row1.insertCell(-1);
		text = "Row 1 Cell 3";
		cell13.appendChild(document.createTextNode(text));
		console.log("Here4 ");
		*/

		function IclickedHere() {
			// "this" should be an object of what was clicked!
			this.innerHTML = "clicked!";
			if (this.style.color == "red") {
				this.style.color = "blue";
			} else {
				this.style.color = "red";
			}
		}

		//stop user from making a bunch of tables
		var startToggle = true;
		//make the board
		function makeTable(){
			if(startToggle == true){
				msg = document.getElementById("gamemsg");
				msg.innerHTML = "Press move button and select which friendly ship you would like to move"
				+ "<br />" + "Chose FS Ship or FP Ship";
				for(i = 0; i < 22; i++){
					insertSpot();
				}
			} else {
				msg.innerHTML = "You must finish the current game before restarting!";
			}
			startToggle = false;
		}

		/*function finished(){
			if(positions[0] >= 21){
				scoutfin = document.getElementById("21");
				scoutfin.innerHTML = "FS Ship";
				msg = document.getElementById("gamemsg");
				msg.innerHTML = "Friendly Scout has reached the finish line, one to go!";

			}
		}*/

		function rollDice(begin, end){
			return Math.floor(Math.random() * (end - begin + 1)) + begin;
		}

		function insertSpot() {
			var theBoard = document.getElementById("trouble");
			var newRow = theBoard.insertRow(-1);
			var numRows = theBoard.getElementsByTagName("tr").length-1; // rows start at 0

			cell10 = newRow.insertCell(-1);
			text = numRows;
			cell10.appendChild(document.createTextNode(text));
			cell10.id = numRows;

			//console.log("HereX :", cell10.id);

			cell11 = newRow.insertCell(-1);
			text = numRows + 22;
			cell11.appendChild(document.createTextNode(text));
			cell11.id = numRows + 22;

			//console.log("HereY :", cell11.id);

			cell12 = newRow.insertCell(-1);
			text = numRows + 44;
			cell12.appendChild(document.createTextNode(text));
			cell12.id = numRows + 44;

			//console.log("HereX :", cell10.id);

			cell13 = newRow.insertCell(-1);
			//text = "Row "+numRows+" Cell 3";
			text = numRows + 66;
			cell13.appendChild(document.createTextNode(text));
			cell13.id = numRows + 66;

			//console.log("HereX :", cell10.id);

			/*if (numRows == 5) {
				// example event!
				cell11.addEventListener("click", IclickedHere, false);
				console.log("Debug: listener added!");
			}
			*/
			w = document.getElementById("0");
			x = document.getElementById("22");
			y = document.getElementById("44");
			z = document.getElementById("66");
			w.innerHTML = "Friendly" + "<br />" + "Scout";
			x.innerHTML = "Friendly" + "<br />" + "Passenger";
			y.innerHTML = "Enemy" + "<br />" + "Scout";
			z.innerHTML = "Enemy" + "<br />" + "Passenger";



			//change text
			//x = document.getElementById("newRow"+numRows+"1");
			//x.innerHTML+=" - Rows: " + numRows;

		}


		var positions = [1, 23, 45, 67];

		function moveShip(){
			scout = document.getElementById(positions[0]);
			pass = document.getElementById(positions[1]);
			y1 = document.getElementById(positions[2]);
			z1 = document.getElementById(positions[3]);
			scout.innerHTML = "FS Ship";
			pass.innerHTML = "FP Ship";
			y1.innerHTML = "ES Ship";
			z1.innerHTML = "EP Ship";

			moveNum = rollDice(1,6);
			//call listenClickMove
			//capture return cell vals
			//do nonkios turn
			scout.addEventListener("click", scoutmove, false);
			pass.addEventListener("click", passmove, false);
		}

		function scoutmove(){
			moveNum = rollDice(1,6);
			removeclickpass = document.getElementById(positions[1]);
			removeclickpass.removeEventListener("click", passmove, false);
			removeclickscout = document.getElementById(positions[0]);
			removeclickscout.removeEventListener("click", scoutmove, false);
			this.innerHTML = "";
			newid = parseInt(this.id) + moveNum;
			if(newid > 21){
				newid = 21;
				msg = document.getElementById("gamemsg");
				msg.innerHTML = "Friendly Scout has reached the finish line!";
			}
			newspot = document.getElementById(parseInt(this.id) + moveNum);
			newspot.innerHTML = "|| FS Ship ||";
			msg = document.getElementById("gamemsg");
			msg.innerHTML = "You rolled a " + moveNum + "!";
			positions[0] = newspot.id;
			//finished();
			nonkiomove();
		}

		function passmove(){
			moveNum = rollDice(1,6);
			removeclickscout = document.getElementById(positions[0]);
			removeclickscout.removeEventListener("click", scoutmove, false);
			removeclickpass = document.getElementById(positions[1]);
			removeclickpass.removeEventListener("click", passmove, false);
			this.innerHTML = "";
			newspot = document.getElementById(parseInt(this.id) + moveNum);
			newspot.innerHTML = "FP Ship";
			msg = document.getElementById("gamemsg");
			msg.innerHTML = "You rolled a " + moveNum + "!";
			positions[1] = newspot.id;
			nonkiomove();
		}

		var switcher = 1;

		function nonkiomove(){
			msg = document.getElementById("gamemsg");
			msg.innerHTML = "Nonkio is making his move!";
			setTimeout(function() {
				moveNum = rollDice(1,6);
				kioscout = document.getElementById(positions[2]);
				kiopass = document.getElementById(positions[3]);
				if(switcher == 1){
					kioscout.innerHTML = ""
					newspot = document.getElementById(parseInt(kioscout.id) + moveNum);
					newspot.innerHTML = "ES Ship";
					switcher = 0;
					positions[2] = newspot.id;
				} else {
					kiopass.innerHTML = ""
					newspot = document.getElementById(parseInt(kiopass.id) + moveNum);
					newspot.innerHTML = "EP Ship";
					switcher = 1;
					positions[3] = newspot.id;
				}
			}, 3000);
		}

		/*function passmove(cell1, cell2, moveNum){
			scoutclick = document.getElementById(cell1);
			passclick = document.getElementById(cell2);
			//scoutclick.removeEventListener("click", scoutmove(cell1, cell2, moveNum), false);
			//passclick.removeEventListener("click", passmove(cell1, cell2, moveNum), false);
			passclick.innerHTML = "";
			newspot = document.getElementById(cell2 + moveNum);
			newspot.innerHTML = "FP Ship";

		}*/

		/*function listenClickMove(cell1, cell2, moveNum){
			//add click listeners on cell1 and cell2
			//once either is clicked iterate that column row by moveNum
			//move the ship to new place
			//remove listeners
			//return new cell positions
			//put cell positions in array positions
			scoutclick = document.getElementById(cell1);
			passclick = document.getElementById(cell2);
		}*/

	</script>

	</body>
</html>
